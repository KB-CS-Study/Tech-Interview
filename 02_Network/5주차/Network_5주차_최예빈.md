# OSI 7 계층

### OSI 7 계층 모델이란?
![Image](https://github.com/user-attachments/assets/8904ee42-d08e-4c4a-ba7e-176ffa2edeeb)

- 네트워크의 동작 과정을 설명하는 가장 대표적인 모델
- 복잡한 통신 과정을 계층적으로 나누고 계층별로 독립적으로 동작
- 실제 구현된 시스템이 아니라 일종의 개념적 모델
    
※ TCP/IP는 실제 구현이 되어 실질적인 표준처럼 사용되는 네트워크 모델
    

### 통신 프로토콜이란?

- 네트워크를 통해 데이터를 주고받는 과정에 대한 약속
- 각 계층별로 동작하는 다수의 프로토콜이 정의됨

### OSI 7 계층 모델

OSI 7 계층 모델은 통신 프로토콜을 7개의 세부 계층으로 나눠서 설명한다.

- 7계층 : 응용 계층
    - 사용자에게 인터페이스를 제공하는 계층
    - 응용 프로세스와 직접 작용하며 일반적인 응용 서비스(웹 브라우저, 메일 전송 프로그램 등)를 수행한다.
    - 대표적인 프로토콜: FTP, HTTP, TELNET, SSH
- 6계층 : 표현 계층
    - 암호화•복호화 혹은 인코딩•디코딩 등의 데이터 형식의 변환을 수행하는 계층
- 5계층 : 세션 계층
    - 양 끝단에 있는 두 개의 응용 프로세스 사이에 통신을 관리하는 계층
    - 전이중 방식, 반이중 방식, 단방향 방식 통신 방식을 지원한다.
- 4계층 : 전송 계층
    - 양 끝단에 있는 사용자가 데이터를 주고받게 하는 계층
    - 대표적인 프로토콜: TCP, UDP
    - **TCP** : connection-oriented(신뢰성 있는 통신)
        - 오류 제어 : 양 끝단에서 전달받은 데이터의 오류를 검출
            
            → 오류가 있다고 판단되면 재전송을 요청, 중복전송되는 경우 중복된 데이터를 삭제
            
        - 흐름 제어 : 수신측에서 처리할 수 있을 만큼의 데이터만 송신측에서 보내도록 제어
    - **UDP** : connectionless
        - 신뢰성을 보장하지 않지만 속도는 빠름 (ex. 인터넷 실시간 영상)
- 3계층 : 네트워크 계층
    - 여러 개의 노드를 거칠 때마다 경로를 찾아주는 역할(라우팅)을 하는 계층
    - 여러 개의 노드가 복잡하게 연결된 네트워크에서 최적의 전달 경로가 정해질 수 있도록 여러 가지 기능을 제공
    - 대표적인 프로토콜 : IP
- 2계층 : 데이터 링크 계층
    - 직접 연결된 단말 사이의 신뢰성 있는 전송을 보장하는 계층
        
        ※ 3계층처럼 전체 경로를 보는게 아님
        
    - 1계층에서 발생할 수 있는 오류를 찾아내고 이를 수정
        
        → 에러를 검출하기 위해 패리티 검사 등의 기법을 사용한다.
        
    - 상호 통신을 위해 MAC 주소(물리 주소)가 필요
    - 대표적인 장비 : Switch
    - 대표적인 프로토콜 : Ethernet
- 1계층 : 물리 계층
    - 단말과 단말 사이를 실제 물리적으로 연결
        
    ※ 단말 : 네트워크 사이를 연결하는 노드 + 네트워크에 참여한 모든 단말을 포함(PC, 스마트폰 등)
        
    - 대표적인 장비 : 꼬임쌍선, 광케이블, 무선

# TCP/IP 4계층 모델

- TCP/IP 4계층은 현재 인터넷에서 실제로 사용되는 프로토콜로, 실무 중심적이고 프로토콜 위주로 단순화된 모델이다.
    
    → 네트워크 전송 시 데이터 표준을 정리한 것이 OSI 7계층이라면, 이를 기반으로 실제 인터넷 환경에서 활용되는 표준이 바로 TCP/IP 4계층이다.

![Image](https://github.com/user-attachments/assets/d4d5cc59-ad91-4774-aa76-e51a4b2270bb)

| 계층 | 데이터 단위 | 전송 주소 |
| --- | --- | --- |
| 응용 계층 (Application Layer) | 데이터 / 메세지 |  |
| 전송 계층 (Transport Layer) | 세그먼트 | Port |
| 인터넷 계층(Internet Layer) | 패킷 | IP |
| 네트워크 연결 계층 (Network Access Layer) | 프레임 | MAC |

### TCP

- TCP는 연결 지향적인 프로토콜
- 송신자와 수신자가 통신을 시작하면 둘 사이에 연결이 맺어지고 통신이 끝날 때까지 연결이 지속됨
- TCP의 시작 과정 : 3-way handshaking
    1. 송신자 : 연결을 맺자고 요청하는 SYN 패킷을 보냄
    2. 수신자 : 송신자의 요청을 승인하는 SYN+ACK 패킷을 보냄
    3. 송신자 : 수신자의 승인 패킷을 확인했다는 의미로 ACK 패킷을 보냄
- TCP 데이터 전송 : 2-way 방식
- 수신자의 ACK 패킷을 송신자가 일정 시간 못 받은 경우
    
    → 송신자는 수신자에게 메세지를 재전송
    
- TCP connection 끊기 : 4-way 방식
    1. 송신자 : 수신자에게 연결을 끊고자 FIN 패킷을 보냄
    2. 수신자 : ACK 패킷을 보냄 - 종료 요청에 대한 확인
    3. 수신자 : FIN 패킷을 보냄 - 자신도 연결 종료를 요청하는 것
    4. 송신자 : 수신자의 종료 패킷에 대한 확인으로 ACK 패킷을 보냄 

### IP

- 라우팅을 담당
- 라우팅 테이블 : 각 노드 사이의 연결 정보를 저장한 테이블
    - 두 연결 사이의 전송 비용이 저장됨(전송 속도 or 라우터 개수)

# HTTP vs HTTPS

### HTTP

- 웹에서 사용되는 프로토콜로 다양한 응용 프로그램에 접근하여 텍스트, 그래픽, 애니메이션들 보거나 사운드 재생 등의 역할
- HTTP는 connetcionless 프로토콜이다.
    
    → 클라이언트가 서버에 요청을 보내면 서버는 클라이언트에게 응답을 보내고 접속을 끊는다. 
    
- HTTP는 stateless 프로토콜이다.
    
    → 상태정보를 저장해야 하는 경우 쿠키와 세션을 사용해야 한다.
    

### HTTPS

- HTTP에 보안 기능(암호화와 인증)을 추가한 프로토콜
- 데이터 전송 시 **SSL/TLS**를 사용해 암호화하여, 중간에서 데이터가 탈취되거나 변조되는 것을 방지한다.

| 구분 | HTTP | HTTPS |
| --- | --- | --- |
| 데이터 전송 | 평문(암호화 없음)으로 전송 | 암호화된 상태로 전송 |
| 보안성 | 취약 (데이터 도청·변조 위험) | 안전 (데이터 암호화, 도청·변조 방지) |
| 인증서 | 필요 없음 | SSL/TLS 인증서 필요 |
| 속도 | 빠름 (암호화 과정 없음) | 약간 느림 (암호화·복호화 과정 추가) |

# HTTP 상태 코드 (2xx, 3xx, 4xx, 5xx)

HTTP 상태 코드는 서버가 클라이언트 요청에 대해 어떤 결과를 반환했는지 나타내는 숫자 코드이다.

### 2xx (성공 - Success)

요청이 정상적으로 처리됨

- **200 :** OK
- **201 :** Created(PUT 메소드에 의해 파일이 서버에 생성됨)
- **202 :** Accepted(요청 수락됨)
- **204 :** No Content(바디에 데이터가 없음)

### 3xx (리다이렉션 - Redirection)

요청을 처리하기 위해 클라이언트가 다른 URL로 이동(리다이렉션) 되어야 함

### 4xx (클라이언트 오류 - Client Error)

클라이언트의 요청에 문제가 있어서 처리를 할 수 없음

- **400 :** Bad Request(요청 메세지의 문법 오류)
- **401 :** Unauthorized(요청 메세지에 대한 인증 오류)
- **403 :** Forbidden(요청에 대한 접근 차단)
- **404 :** Not Found(요청한 자료가 존재하지 않음)

### 5xx (서버 오류 - Server Error)

서버 측에서 오류가 발생하여 요청을 처리할 수 없음

- **500 :** Internal Server Error(서버 내부에 오류 발생)
- **502 :** Bad Gateway(게이트웨이나 프록시 서버가 잘못된 응답을 수신함)
- **503 :** Service Unavailable(서버가 과부하 또는 점검 중이라 일시적으로 사용 불가)
- **504 :** Gateway Timeout(게이트웨이나 프록시 서버가 응답 대기 시간 초과로 실패함)